<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Impress√£o 3D</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="main-wrapper">
        <aside id="configPanel" class="config-panel hidden">
            <h2>Configura√ß√£o Mestra</h2>
            <form id="configForm">
                <div class="row">
                    <div class="input-group">
                        <label for="selEst" data-tooltip="Selecione o estado para carregar a tarifa m√©dia de energia automaticamente.">Estado (Tarifa)</label>
                        <select id="selEst"><option value="outros">Manual</option></select>
                    </div>
                    <div class="input-group">
                        <label for="energyKwh" data-tooltip="Custo total por kWh, incluindo impostos (ICMS, PIS/COFINS).">kWh (R$)</label>
                        <input type="number" id="energyKwh" value="0.92" step="0.01">
                    </div>
                </div>
                <div class="input-group">
                    <label for="selImp" data-tooltip="Modelo da impressora para ajuste de consumo base.">Impressora</label>
                    <select id="selImp"><option value="outros">Personalizado</option></select>
                </div>
                <div class="row">
                    <div class="input-group">
                        <label for="consumoKw" data-tooltip="Consumo el√©trico m√©dio da impressora durante o funcionamento.">Consumo (kW)</label>
                        <input type="number" id="consumoKw" value="0.07" step="0.001">
                    </div>
                    <div class="input-group">
                        <label for="margin" data-tooltip="Fator de lucro e custos fixos (2.0 = 100% de margem).">Margem</label>
                        <input type="number" id="margin" value="2.0" step="0.1">
                    </div>
                </div>

                <div class="input-group">
                    <label>Meus Filamentos</label>
                    <div class="filament-header">
                        <span>Nome</span>
                        <span>R$</span>
                        <span>gramas</span>
                        <span></span>
                    </div>
                    <div id="filamentList"></div>
                    <button type="button" class="btn btn-add" onclick="App.addFilamentRow()">+ Novo Filamento</button>
                </div>

                <div class="row">
                    <div class="input-group">
                        <label for="machineCost" data-tooltip="Custo fixo por in√≠cio de impress√£o (Setup/Fatiamento).">Setup (R$)</label>
                        <input type="number" id="machineCost" value="8">
                    </div>
                    <div class="input-group">
                        <label for="hourRate" data-tooltip="Custo de deprecia√ß√£o, manuten√ß√£o e ocupa√ß√£o por hora de m√°quina ligada.">M√°quina (R$/h)</label>
                        <input type="number" id="hourRate" value="2.00" step="0.1">
                    </div>
                </div>

                <div class="link-section">
                    <label data-tooltip="Link para voc√™ compartilhar essa tela, com suas configura√ß√µes j√° preenchidas">Link com estes par√¢metros:</label>
                    <textarea id="linkOutput" readonly rows="2"></textarea>
                    <button type="button" class="btn btn-secondary" onclick="App.copyLink()" style="width:100%">üìã Copiar Link</button>
                </div>
            </form>
        </aside>

        <main class="container">
            <h1>Simulador de pre√ßos</h1>
            <form id="simulatorForm">
                <div class="input-group">
                    <label>Cores utilizadas nesta pe√ßa:</label>
                    <div id="colorChoices" class="color-selector"></div>
                </div>
                <div class="input-group">
                    <label for="quantity" data-tooltip="Quantidade de c√≥pias id√™nticas que ser√£o impressas.">Quantidade de Pe√ßas</label>
                    <input type="number" id="quantity" value="1" min="1">
                </div>
                <div class="row">
                    <div class="input-group">
                        <label for="weight" data-tooltip="Peso total de material usado (indicado pelo fatiador).">Peso</label>
                        <input type="text" id="weight" placeholder="Ex: 50g ou 1kg" autofocus>
                    </div>
                    <div class="input-group">
                        <label for="minutes" data-tooltip="Dura√ß√£o total da impress√£o estimada pelo fatiador.">Tempo</label>
                        <input type="text" id="minutes" placeholder="Ex: 30m ou 2h" value="0">
                    </div>
                </div>

                <input type="hidden" id="priceKg" value="100">

                <div class="result-card">
                    <div id="instruction" class="instruction-msg">
                        <strong>Como preencher:</strong>
                        <ul>
                            <li><strong>Peso:</strong> Use n√∫meros ou unidades (Ex: <code>50g</code>, <code>1kg</code>).</li>
                            <li><strong>Tempo:</strong> Use minutos ou horas (Ex: <code>45m</code>, <code>2h</code>).</li>
                        </ul>
                    </div>
                    <div id="resultBox" class="hidden">
                        <div class="result-label">Pre√ßo Total Estimado</div>
                        <div id="finalPrice" style="font-size: 2.5rem; font-weight: 800; color: var(--success);">R$ 0,00</div>
                    </div>
                </div>
            </form>
        </main>
    </div>

    <button id="toggleConfig" class="btn-config-trigger" title="Configura√ß√µes">‚öôÔ∏è</button>
    <script src="app.js"></script>
</body>
</html>
